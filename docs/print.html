<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Paperbit Documentation</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "rust" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="setup/index.html"><strong aria-hidden="true">1.</strong> Setup a Project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="setup/html.html"><strong aria-hidden="true">1.1.</strong> HTML</a></li><li class="chapter-item expanded "><a href="setup/webpack.html"><strong aria-hidden="true">1.2.</strong> Webpack</a></li><li class="chapter-item expanded "><a href="setup/react.html"><strong aria-hidden="true">1.3.</strong> React</a></li></ol></li><li class="chapter-item expanded "><a href="core_concepts.html"><strong aria-hidden="true">2.</strong> Core Concepts</a></li><li class="chapter-item expanded "><a href="how_to_continue.html"><strong aria-hidden="true">3.</strong> How To Continue</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="ref/canvas/index.html"><strong aria-hidden="true">4.</strong> PaperbitCanvas</a></li><li class="chapter-item expanded "><a href="ref/api/index.html"><strong aria-hidden="true">5.</strong> PaperbitAPI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ref/api/graphic-functions/index.html"><strong aria-hidden="true">5.1.</strong> Graphic Functions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ref/api/graphic-functions/rect.html"><strong aria-hidden="true">5.1.1.</strong> Rectangle</a></li><li class="chapter-item expanded "><a href="ref/api/graphic-functions/ellipse.html"><strong aria-hidden="true">5.1.2.</strong> Ellipse</a></li><li class="chapter-item expanded "><a href="ref/api/graphic-functions/triangle.html"><strong aria-hidden="true">5.1.3.</strong> Triangle</a></li><li class="chapter-item expanded "><a href="ref/api/graphic-functions/triangle-strip.html"><strong aria-hidden="true">5.1.4.</strong> Triangle Strip</a></li><li class="chapter-item expanded "><a href="ref/api/graphic-functions/line.html"><strong aria-hidden="true">5.1.5.</strong> Line</a></li></ol></li><li class="chapter-item expanded "><a href="ref/api/state/index.html"><strong aria-hidden="true">5.2.</strong> State</a></li><li class="chapter-item expanded "><a href="ref/api/canvas-data/index.html"><strong aria-hidden="true">5.3.</strong> Canvas Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ref/api/canvas-data/mouse.html"><strong aria-hidden="true">5.3.1.</strong> Mouse</a></li><li class="chapter-item expanded "><a href="ref/api/canvas-data/keyboard.html"><strong aria-hidden="true">5.3.2.</strong> Keyboard</a></li><li class="chapter-item expanded "><a href="ref/api/canvas-data/frame.html"><strong aria-hidden="true">5.3.3.</strong> Frame</a></li><li class="chapter-item expanded "><a href="ref/api/canvas-data/events.html"><strong aria-hidden="true">5.3.4.</strong> Events</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="ref/utils/index.html"><strong aria-hidden="true">6.</strong> Utilities</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ref/utils/vector.html"><strong aria-hidden="true">6.1.</strong> Vector</a></li><li class="chapter-item expanded "><a href="ref/utils/matrix.html"><strong aria-hidden="true">6.2.</strong> Matrix</a></li><li class="chapter-item expanded "><a href="ref/utils/geometry.html"><strong aria-hidden="true">6.3.</strong> Geometry</a></li><li class="chapter-item expanded "><a href="ref/utils/smooth_bit.html"><strong aria-hidden="true">6.4.</strong> SmoothBit</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Paperbit Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Paperbit is a library to create graphics with WebGL.
Our main goal is to let the programmer develop his own creativity.</p>
<p>The library gives graphical functions to draw to the canvas,
and some utilities to accelerate development process.</p>
<h2 id="get-started"><a class="header" href="#get-started">Get Started</a></h2>
<p>To use Paperbit you will need to <a href="./setup_a_project.html">setup a project</a>
and understand the <a href="./core_concepts.html">core concepts</a>.
Then you can read the documentation freely while using the library.</p>
<p>We also recommend to check out some <a href="">examples</a> to power up,
to get inspiration
and to understand the capabilities of the library.</p>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>Feel free to create a <a href="https://github.com/otcova/paperbit/pulls">pull request</a> to improve this documentation.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setup-a-project"><a class="header" href="#setup-a-project">Setup a Project</a></h1>
<p>Paperbit is not restricted to any framework, 
here we let you choose the one which you are most comfortable with.
However, if you don’t have experience with node js,
we recommend to use the HTML guide.</p>
<ul>
<li><a href="setup/./html.html">HTML</a> — Create a new project from the start in a simple, good and fast way.</li>
<li><a href="setup/./webpack.html">Webpack</a> — Create a new project from the start in a (maybe) over engineered way.</li>
<li><a href="setup/./react.html">React</a> — Integrate Paperbit to an existing react app.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="html"><a class="header" href="#html">HTML</a></h1>
<p>Setting up Paperbit on a HTML file is very straightforward,
you only have to follow these four simple steps:</p>
<h2 id="1-create-a-project-folder"><a class="header" href="#1-create-a-project-folder">1. Create a project folder</a></h2>
<p>It can have the name you want,
the purpose of the folder is to have a place to put all the files
without losing them.</p>
<h2 id="2-create-the-html-file"><a class="header" href="#2-create-the-html-file">2. Create the HTML file</a></h2>
<p>The HTML is going to tell to the browser what to do.
We are going to need the following two tags:</p>
<ul>
<li><code>&lt;style&gt;</code> — to make the body of the page the size of the screen.</li>
<li><code>&lt;script&gt;</code> — to include your code.</li>
</ul>
<p>The file can have the name you want,
the only requisite is that it should end with <code>.html</code>.
After creating the file, fill it with the following code:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset=&quot;UTF-8&quot;&gt;
		&lt;title&gt;Paperbit&lt;/title&gt;
		&lt;style&gt; html, body { width: 100%; height: 100%; margin: 0; } &lt;/style&gt;
		&lt;script src=&quot;./main.js&quot; type=&quot;module&quot; defer&gt;&lt;/script&gt;
	&lt;/head&gt;
	&lt;body&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>This is a blank template with the two tags we talk about.
If you don’t know HTML don’t worry,
you are not going to need to modify it.</p>
<h2 id="3-create-the-source-file"><a class="header" href="#3-create-the-source-file">3. Create the source file</a></h2>
<p>In HTML code, we told the browser to load a script named <code>main.js</code>,
so we need to create the file.
Paste the next code to the new <code>main.js</code> file.</p>
<pre><code class="language-js">import { PaperbitCanvas } from &quot;./paperbit.js&quot;

const canvas = new PaperbitCanvas(document.body)
const { ellipse, mouse } = canvas.api

canvas.api.onDraw = () =&gt; {
    ellipse(...mouse.pos, .1)
}
</code></pre>
<p>This is a blank Paperbit template.
In this script we can observe three different parts:</p>
<ul>
<li><strong>Import the library</strong></li>
</ul>
<pre><code class="language-js">import { PaperbitCanvas } from &quot;./paperbit.js&quot;
</code></pre>
<p>The first line imports the PaperbitCanvas from the paperbit library,
so we will have to
<a href="setup/html.html#" onauxclick="event.preventDefault(); this.click()" onclick="
	console.log(event)
	if (!this.download) {
		event.preventDefault();
		fetch('https:\/\/raw.githubusercontent.com/otcova/paperbit/main/bundle/paperbit.js')
		.then(response => response.blob())
		.then(blob => {
			this.href = window.URL.createObjectURL(blob);
			this.download = 'paperbit.js';
			this.click();
		});
	}
">download</a>
the library (witch will be a single file), and move it to the projects folder.</p>
<ul>
<li><strong>Create the canvas</strong></li>
</ul>
<pre><code class="language-js">const canvas = new PaperbitCanvas(document.body)
const { ellipse, mouse } = canvas.api
</code></pre>
<p>The next two lines are creating a PaperbitCanvas instance in the body of our page.
Then we are extracting the <code>ellipse</code> and <code>mouse</code> properties from the canvas api.
We could call <code>canvas.api.ellipse</code> every time we need to draw an ellipse to the canvas,
but it’s cleaner to store the function in a constant.</p>
<ul>
<li><strong>Draw to the canvas</strong></li>
</ul>
<pre><code class="language-js">canvas.api.onDraw = () =&gt; {
    ellipse(...mouse.pos, .1)
}
</code></pre>
<p>Now that we have the canvas and a draw function (ellipse),
we can set up a draw event.
When a new frame is requested the onDraw function will fire
and the code will be executed.</p>
<p>In this case we have an ellipse being drawn to the mouse position
and with a size of 0.1 units.
Note that the size of an ellipse usually is defined by two values (width and height).
However, in this case that we omitted the height dimension Paperbit is going to create an
ellipse of 0.1 units of width and height, aka a circle of 0.1 units of diameter.</p>
<h2 id="4-open-the-html-file"><a class="header" href="#4-open-the-html-file">4. Open the HTML file</a></h2>
<p>Finally, we need to open the file to see our app.
You can do it by opening it with any browser.
You should see a beautiful ellipse following your mouse.</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>Now we have a place to start coding and develop our ideas.
To learn how Paperbit works go to the <a href="setup/./../core_concepts.html">Core Concepts</a>
section, and to power up we recommend to take a took to the <a href="setup/">How To Continue</a> section.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="webpack"><a class="header" href="#webpack">Webpack</a></h1>
<p>This is a step guide for creating a new webpack project, 
if you already know how to create one,
feel free to go to the <a href="setup/webpack.html#use-paperbit">Use Paperbit</a> section.</p>
<h2 id="system-requirements"><a class="header" href="#system-requirements">System Requirements</a></h2>
<ul>
<li><a href="http://nodejs.org/" target="_blank">Node.js 12.22.0</a> or later</li>
</ul>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<h4 id="install-the-dependencies"><a class="header" href="#install-the-dependencies">Install the Dependencies</a></h4>
<p>Open the terminal on a new file, and create the npm project with the command:</p>
<pre><code>npm init -y
</code></pre>
<p>Install Paperbit</p>
<pre><code>npm install paperbit 
</code></pre>
<p>And finally install the development dependencies</p>
<pre><code>npm install -D webpack webpack-cli webpack-dev-server babel-loader @babel/core
</code></pre>
<h4 id="create-the-first-project-files"><a class="header" href="#create-the-first-project-files">Create the first project files</a></h4>
<p>Now that we have all the dependencies, we have to setup them so they work as we want.</p>
<p>Fist we need a <code>webpack.config.js</code> file to tell webpack what to do:</p>
<pre><code class="language-javascript">const path = require('path');

module.exports = {
	mode: 'development',
	
	devtool: 'inline-source-map',
	entry: './src/main.js',
	output: {
		filename: 'index.js',
		path: path.resolve(__dirname, 'public'),
	},
	module: {
		rules: [
			{
				test: /\.ts$/,
				exclude: /node_module/,
				use: 'babel-loader'
			}]
	},
	resolve: {
		extensions: ['.js']
	},
	devServer: {
		port: 80,
		static: { directory: path.resolve('public') },
		client: { logging: 'warn' },
	},
}
</code></pre>
<p>In that configuration we tolled to webpack:</p>
<ul>
<li>Our javascript source code is in the <code>src</code> folder, and the entrypoint is the file <code>main.js</code></li>
<li>Bundle the source code in a single file <code>index.js</code></li>
<li>And serve the folder <code>public</code> on <code>http://localhost</code> </li>
</ul>
<p>Now we have to create the <code>src</code> folder with the <code>main.js</code> file:</p>
<pre><code class="language-javascript">console.log(&quot;Hello world!&quot;)
</code></pre>
<p>We also need a <code>index.html</code> file on the <code>public</code> folder, which will tell the web client to load the bundled code:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
	&lt;meta charset=&quot;UTF-8&quot;&gt;
	&lt;title&gt;Paperbit&lt;/title&gt;
	&lt;style&gt;
		html, body {
			width: 100%;
			height: 100%;
			margin: 0px;
		}
	&lt;/style&gt;
	&lt;script src=&quot;./index.js&quot; defer&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4 id="serve-the-web"><a class="header" href="#serve-the-web">Serve the web</a></h4>
<p>Now we have all set up, to launch the website you can use this single command:</p>
<pre><code>npx webpack serve
</code></pre>
<p>It will serve on the <a href="http://localhost">http://localhost</a> website 
and it will update when you change the source code.</p>
<p>It’s recommended to add the command to the <code>package.json</code> file, inside the “scripts” add the following line</p>
<pre><code class="language-json">// [...]
// &quot;scripts&quot;: {
		&quot;serve&quot;: &quot;webpack serve&quot;,
// [...]
</code></pre>
<p>and now you can serve with the following</p>
<pre><code>npm run serve
</code></pre>
<h2 id="use-paperbit"><a class="header" href="#use-paperbit">Use Paperbit</a></h2>
<p>Finally we have our project setup, now we can use the Paperbit library.</p>
<p>All the javascript code will be inside the <code>src</code> folder, so feel free to add new files when your main gets big.
At the moment, we have to initialize the library, so replace the code you have in the entrypoint (<code>main.js</code>) with the following:</p>
<pre><code class="language-javascript">import { PaperbitCanvas } from &quot;paperbit&quot;

const canvas = new PaperbitCanvas(document.body)
const { ellipse, mouse } = canvas.api

canvas.api.onDraw = () =&gt; {
	ellipse(...mouse.pos, .1)
}
</code></pre>
<p>Now serve it (<code>npm run serve</code>) and the fun part begins.</p>
<h2 id="next-steps-1"><a class="header" href="#next-steps-1">Next Steps</a></h2>
<p>Now we have a place to start coding and develop our ideas.
To learn how Paperbit works go to the <a href="setup/./../core_concepts.html">Core Concepts</a>
section, and to power up we recommend to take a took to the <a href="setup/">How To Continue</a> section.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="react"><a class="header" href="#react">React</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="core-concepts"><a class="header" href="#core-concepts">Core Concepts</a></h1>
<p>Paperbit has two distinct parts, the <a href="core_concepts.html#graphics-engine">graphics engine</a> and the <a href="core_concepts.html#utilities">utilities</a>.</p>
<h2 id="graphics-engine"><a class="header" href="#graphics-engine">Graphics Engine</a></h2>
<h4 id="paperbitcanvas"><a class="header" href="#paperbitcanvas">PaperbitCanvas</a></h4>
<p>The first thing you will do in a Paperbit project, is to create a <code>PaperbitCanvas</code> object.
It is the responsible of creating the canvas.
His job is to request frames to the PaperbitAPI.
When a frame request is complete,
it sends to the gpu all the geometry in a single draw call.</p>
<h4 id="paperbitapi"><a class="header" href="#paperbitapi">PaperbitAPI</a></h4>
<p>When creating the PaperbitCanvas it will create automatically the api.
When using Paperbit the 99% of the time we are going to interact with the PaperbitAPI
because it is the responsible of creating the frame data. 
When the PaperbitCanvas request a frame PaperbitAPI will fire the needed events (onStart, onDraw, onMouseMove, …),
and when they return, it will send back to the PaperbitCanvas all the geometry.</p>
<p>Having this two classes (canvas and api) let us to create the canvas on the main thread
and use the api on a <a href="./graphics/initialize.html#web-worker">web worker</a>. </p>
<h2 id="utilities"><a class="header" href="#utilities">Utilities</a></h2>
<p>When using a graphics library, it is always nice to have some common features in our disposal:</p>
<ul>
<li><a href="utils/vector.html">Vector</a> operations</li>
<li><a href="utils/matrix.html">Matrix</a> operations</li>
<li><a href="utils/geometry.html">Geometric</a> operations</li>
<li><a href="utils/smooth_bit.html">Smooth</a> the transition of a number</li>
</ul>
<p>The main purpose of the utilities is to avoid reinventing the wheel in each project.
It is not necessary to use them, but in some circumstances they might be very helpful.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-continue"><a class="header" href="#how-to-continue">How To Continue</a></h1>
<p>After creating a project and reading the core concepts,
you should have enough background to start developing making use of the reference section.</p>
<ul>
<li>For creating the canvas go to <a href="./ref/canvas/index.html">PaperbitCanvas</a>.</li>
<li>For using the api go to <a href="./ref/api/index.html">PaperbitAPI</a>.</li>
<li>For using the utilities go to <a href="./ref/utils/index.html">Utilities</a>.</li>
</ul>
<p>If you still don’t know how to continue, we recommend to check out some <a href="">examples</a> and read the [PaperbitAPI] documentation.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="paperbit-constructor"><a class="header" href="#paperbit-constructor">Paperbit Constructor</a></h1>
<p>A Paperbit context consist of the PaperbitCanvas, and the PaperbitAPI.
When calling <code>new PaperbitCanvas(...)</code> it will also create a PaperbitAPI, 
but we are not forced to used it (as demonstrated on the <a href="ref/canvas/index.html#web-worker">Web worker</a> section).</p>
<h2 id="recommended"><a class="header" href="#recommended">Recommended</a></h2>
<p>For most user cases, this is the better (and simplest) approach.
PaperbitCanvas is creating the canvas at the provided container (<code>document.body</code>),
and it is also creating a PaperbitAPI instance already linked with the canvas.</p>
<pre><code class="language-javascript">const bit = new PaperbitCanvas(document.body)
const { ellipse, mouse } = bit.api

bit.api.onDraw = () =&gt; {
	ellipse(...mouse.pos, .1)
}
</code></pre>
<h2 id="web-worker"><a class="header" href="#web-worker">Web worker</a></h2>
<blockquote>
<p>⚠️ This is still in a very early access, things might change.</p>
</blockquote>
<p>If we want to isolate or don’t block the main thead, 
using a web worker should be a choice to consider.</p>
<p>On the main thread we can create only the canvas and WebGL context.
For Paperbit to understand that we only need the canvas,
we need to get it’s <code>onFrameRequest</code> event.
This way when a frame is requested, we will need to send it to the API.</p>
<ul>
<li>Main Thread Code:</li>
</ul>
<pre><code class="language-javascript">let resolveFrame
onmessage = event =&gt; {
	if (event.data.type == &quot;frameResult&quot;)
		resolveFrame(event.data.frameData)
}

const onFrameRequest =  frameData =&gt; {
	postMessage({ type: &quot;doFrame&quot;, frameData })
	return new Promise(r =&gt; resolveFrame = r)
}

const paperbit = new PaperbitCanvas(document.body, onFrameRequest)
</code></pre>
<p>On the worker side, we can create a PaperbitAPI, it will return the api and a doFrame function.
When we receive the frame request we can use the doFrame function, 
witch will start calling all the events (onStart, onDraw, mouse.onMove, …).
When all events return the function will return as well.
Finally we only need to send the frameData to the main thread to end the frame.</p>
<ul>
<li>Web Worker Code:</li>
</ul>
<pre><code class="language-javascript">onmessage = event =&gt; {
	if (event.data.type == &quot;doFrame&quot;)
		postMessage({ type: &quot;frameResult&quot;, frameData: doFrame(event.data.frameData)})
}

const [api, doFrame] = new PaperbitAPI()
const { ellipse, mouse } = api

api.onDraw = () =&gt; {
	ellipse(...mouse.pos, .1)
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="paperbitapi-1"><a class="header" href="#paperbitapi-1">PaperbitAPI</a></h1>
<p>The graphics API is composed of three components.</p>
<ul>
<li><a href="ref/api/./graphic-functions/index.html">Graphic Functions</a> — Create geometry</li>
<li><a href="ref/api/./state/index.html">State</a> — Customize the geometry</li>
<li><a href="ref/api/./canvas-data/index.html">Canvas Data</a> — Animate the geometry</li>
</ul>
<p>As we can see, the only purpose of the API is to create geometry,
so understanding who geometry works is understanding who PaperbitAPI also works.</p>
<h2 id="geometry"><a class="header" href="#geometry">Geometry</a></h2>
<p>When calling any graphical function, geometry is always created.
In other words, some triangles are pushed to the frame buffer.
Note that ellipses are not made with a polygon with a lot of sides because it wold be very inefficient
(more detail on <a href="ref/api/">ellipse</a>).</p>
<h2 id="the-canvas-space"><a class="header" href="#the-canvas-space">The Canvas Space</a></h2>
<p>The space where geometry moves is more important that the geometry itself.
This space is defined by a simple Cartesian coordinate system.</p>
<p>Most graphical programs have the origin on the left and top of the screen.
This is caused in the history. Early computers had Cathode Ray Tubes
which “draw” the image with a cathode ray from the upper left corner to the lower right.</p>
<p>For our purposes we used a centered origin,
and a scale that is not fixed by the screen resolution.
This way we don’t have to worry about the different screen sizes.
It can be seen in the following screens:</p>
<div style="display: flex; align-items: center; justify-content: space-evenly;">
	<div style="display: flex; align-items: center; justify-content: center;  flex-direction: column;">
		<div style="display: flex; align-items: center; justify-content: center; margin: 5px; border: 1px solid var(--fg); background: var(--links); width: 100px; height: 100px;">
			✖
		</div>
		1:1
	</div>
	<div style="display: flex; align-items: center; justify-content: center;  flex-direction: column;">
		<div style="display: flex; align-items: center; justify-content: center; margin: 5px; border: 1px solid var(--fg); background: var(--links); width: 100px; height: 178px;">
			<div style="display: flex; align-items: center; justify-content: center; width: 100px; height: 100px; border: 1px dashed var(--fg); margin: -1px;">
				✖
			</div>
		</div>
		9:16
	</div>
	<div style="display: flex; align-items: center; justify-content: center;  flex-direction: column;">
		<div style="display: flex; align-items: center; justify-content: center; margin: 5px; border: 1px solid var(--fg); background: var(--links); width: 178px; height: 100px;">
			<div style="display: flex; align-items: center; justify-content: center; width: 100px; height: 100px; border: 1px dashed var(--fg); margin: -1px;">
				✖
			</div>
		</div>
		16:9
	</div>
</div>
<p>The cross (✖) represents the center of the screen, and it is the origin of our coordinate system.
The dashed lines indicates where the x and y coordinate equals 1.
This system is very useful to work with different monitor sizes,
because it automatically rescales the content.</p>
<p>However, some times we will need to work in pixel units.
For that purpose we have <code>frame.pixelSize</code>
that indicates the size of a single pixel in the screen.
Se more about how to use it on the <a href="ref/api/./canvas-data/frame.html">frame</a> section.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="graphic-functions"><a class="header" href="#graphic-functions">Graphic Functions</a></h1>
<p>For drawing to the canvas we need to create geometry.
This functions only request position and size,
the color, texture, and other configurations are managed by the <a href="ref/api/graphic-functions/../state/index.html">State</a>.</p>
<ul>
<li><a href="ref/api/graphic-functions/./rect.html">rect</a> — Draw a rectangle on the canvas from a (x, y) coordinate and a (width, height) size.</li>
<li><a href="ref/api/graphic-functions/./ellipse.html">ellipse</a> — Draw a ellipse on the canvas from a (x, y) coordinate and a (width, height) size.</li>
<li><a href="ref/api/graphic-functions/./triangle.html">triangle</a> — Draw a triangle on the canvas from three coordinates.</li>
<li><a href="ref/api/graphic-functions/./triangle-strip.html">triangleStrip</a> — Draw a triangle strip on the canvas from a list of coordinates.</li>
<li><a href="ref/api/graphic-functions/./line.html">line</a> — Draw a line on the canvas from a list of coordinates.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><script src="../../../code/paperbit-snippets.js" type="module" defer></script>
<h1 id="rectangle"><a class="header" href="#rectangle">Rectangle</a></h1>
<div id="paperbit-snippets">
<pre><code class="language-javascript">const { rect, mouse, state, frame } = canvas.api
</code></pre>
<pre><code class="language-javascript">rect(0, 0, .85)
</code></pre>
<pre><code class="language-javascript">rect(...mouse.pos, 1, .3)
</code></pre>
<pre><code class="language-javascript">state.rectOrigin = [-1, -1]
rect(0, 0, ...mouse.pos)
</code></pre>
</div>
<h2 id="function"><a class="header" href="#function">Function</a></h2>
<pre><code class="language-javascript">rect(x, y, width, height?)
</code></pre>
<table><thead><tr><th style="text-align: center">Parameter</th><th style="text-align: center">Type</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>x</code></td><td style="text-align: center">number</td><td style="text-align: left">-</td></tr>
<tr><td style="text-align: center"><code>y</code></td><td style="text-align: center">number</td><td style="text-align: left">-</td></tr>
<tr><td style="text-align: center"><code>width</code></td><td style="text-align: center">number</td><td style="text-align: left">-</td></tr>
<tr><td style="text-align: center"><code>height</code></td><td style="text-align: center">number</td><td style="text-align: left">width</td></tr>
</tbody></table>
<h2 id="state-configuration"><a class="header" href="#state-configuration">State Configuration</a></h2>
<p>The comportment of the function can be modified by editing
this state properties:</p>
<ul>
<li><a href="ref/api/graphic-functions/"><code>state.rectOrigin</code></a> — set the origin of the rectangle.</li>
<li><a href="ref/api/graphic-functions/"><code>state.rectUV</code></a> — set the texture coordinates.</li>
<li><a href="ref/api/graphic-functions/"><code>state.texture</code></a> — set the texture.</li>
<li><a href="ref/api/graphic-functions/"><code>state.textureColorBlend</code></a> — set the equation used to mic the color with the texture.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ellipse"><a class="header" href="#ellipse">Ellipse</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="triangle"><a class="header" href="#triangle">Triangle</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="triangle-strip"><a class="header" href="#triangle-strip">Triangle Strip</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="line"><a class="header" href="#line">Line</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="state"><a class="header" href="#state">State</a></h1>
<p>We can customize the geometry and modify the graphics functions comportment by editing the state.
The State can be classified with two different sections:</p>
<ul>
<li>The ones that directly <a href="ref/api/state/index.html#get-and-set">gets or sets</a> a value of the state.</li>
<li>The ones that <a href="ref/api/state/index.html#modifiers">modify ot transform</a> the state.</li>
</ul>
<h2 id="get-and-set"><a class="header" href="#get-and-set">Get and Set</a></h2>
<h4 id="color"><a class="header" href="#color">Color</a></h4>
<ul>
<li><a href="ref/api/state/">color</a> — Get and set the color of the geometry [r, g, b, a] with floats between 0 to 1.</li>
<li><a href="ref/api/state/">colorHex</a> — Get and set the color with a single hexadecimal number (0xFF00FF).</li>
<li><a href="ref/api/state/">colorAlpha</a> — Get and set the alpha component of the color (the transparency).</li>
</ul>
<h4 id="texture"><a class="header" href="#texture">Texture</a></h4>
<ul>
<li><a href="ref/api/state/">texture</a> — Get and set the texture used in the geometry.</li>
<li><a href="ref/api/state/">textureColorBlend</a> — Get and set the blend formula to blend the color with the texture.</li>
</ul>
<h4 id="rect"><a class="header" href="#rect">Rect</a></h4>
<ul>
<li><a href="ref/api/state/">rectOrigin</a> — Get and set the origin of the rect.</li>
<li><a href="ref/api/state/">rectUV</a> — Get and set the texture coordinates.</li>
</ul>
<h4 id="text"><a class="header" href="#text">Text</a></h4>
<ul>
<li><a href="ref/api/state/">textOrigin</a> — Get and set the origin of the text.</li>
<li><a href="ref/api/state/">font</a> — Get and set the font used to draw text.</li>
</ul>
<h4 id="line-1"><a class="header" href="#line-1">Line</a></h4>
<ul>
<li><a href="ref/api/state/">lineWidth</a> — Get and set the line width.</li>
<li><a href="ref/api/state/">lineCap</a> — Get and set the type of the line end (round, square, …).</li>
<li><a href="ref/api/state/">lineJoin</a> — Get and set the type of the joints which connect line segments (round, square, …).</li>
</ul>
<h4 id="matrix"><a class="header" href="#matrix">Matrix</a></h4>
<ul>
<li><a href="ref/api/state/">matrix</a> — Get and set the transformation matrix used in the geometry.</li>
<li><a href="ref/api/state/">inverseMatrix</a> — Get the inverse of the transformation matrix.</li>
</ul>
<h2 id="modifiers"><a class="header" href="#modifiers">Modifiers</a></h2>
<h4 id="conserve-the-state"><a class="header" href="#conserve-the-state">Conserve the State</a></h4>
<ul>
<li><a href="ref/api/state/">scope</a> — Create a scope for the state.</li>
</ul>
<h4 id="spatial-transformation"><a class="header" href="#spatial-transformation">Spatial transformation</a></h4>
<ul>
<li><a href="ref/api/state/">translate</a> — Move the geometry.</li>
<li><a href="ref/api/state/">rotate</a> — Rotate the geometry with any axis.</li>
<li><a href="ref/api/state/">rotateX</a> — Rotate the geometry with X axis.</li>
<li><a href="ref/api/state/">rotateY</a> — Rotate the geometry with Y axis.</li>
<li><a href="ref/api/state/">rotateZ</a> — Rotate the geometry with Z axis.</li>
<li><a href="ref/api/state/">scale</a> — Scale the geometry.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="canvas-data"><a class="header" href="#canvas-data">Canvas Data</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mouse"><a class="header" href="#mouse">Mouse</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="keyboard"><a class="header" href="#keyboard">Keyboard</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="frame"><a class="header" href="#frame">Frame</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="events"><a class="header" href="#events">Events</a></h1>
<p>Finally, the api manages events so we can execute the code when it is required.
There are </p>
<ul>
<li><a href="ref/api/canvas-data/">onStart</a> — Fires after the first frame.</li>
<li><a href="ref/api/canvas-data/">onDraw</a> — Fires every frame.</li>
</ul>
<h3 id="mouse-1"><a class="header" href="#mouse-1">Mouse</a></h3>
<p>The <code>api.mouse</code> manages their own events, but instead of using them
we could check the <a href="ref/api/canvas-data/">mouse</a> data every frame.</p>
<ul>
<li><a href="ref/api/canvas-data/">onMove</a></li>
<li><a href="ref/api/canvas-data/">onWheel</a></li>
<li><a href="ref/api/canvas-data/">onDown</a></li>
<li><a href="ref/api/canvas-data/">onUp</a></li>
</ul>
<h3 id="keyboard-1"><a class="header" href="#keyboard-1">Keyboard</a></h3>
<p>The <code>api.keyboard</code> functions the same way that the mouse.
It manages their own events, but instead of using them
we could check the <a href="ref/api/canvas-data/">keyboard</a> data every frame.</p>
<ul>
<li><a href="ref/api/canvas-data/">onDown</a> — Fires when a key is pressed, ‘ó’ would create two events (‘´’ and ‘o’).</li>
<li><a href="ref/api/canvas-data/">onUp</a> — Fires when a key is released, ‘ó’ would create two events (‘´’ and ‘o’).</li>
<li><a href="ref/api/canvas-data/">onType</a>  — Fires a letter when it is typed, ‘ó’ would create a single event.</li>
</ul>
<h3 id="frame-1"><a class="header" href="#frame-1">Frame</a></h3>
<p>The <code>api.frame</code> functions the same way that the mouse and keyboard.
It manages their own events, but instead of using them
we could check the <a href="ref/api/canvas-data/">frame</a> data every frame.</p>
<ul>
<li><a href="ref/api/canvas-data/">onResize</a> — Fires when the canvas size has been resized.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="utilities-1"><a class="header" href="#utilities-1">Utilities</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vector"><a class="header" href="#vector">Vector</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="matrix-1"><a class="header" href="#matrix-1">Matrix</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="geometry-1"><a class="header" href="#geometry-1">Geometry</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="smoothbit"><a class="header" href="#smoothbit">SmoothBit</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
